<!DOCTYPE html>
<html>
<head>
    <title>시간표 생성기</title>
</head>
<body>
    <h1>시간표 생성기</h1>
    <label for="classType">6교시 또는 7교시 선택:</label>
    <select id="classType">
        <option value="6교시">6교시</option>
        <option value="7교시">7교시</option>
    </select>
    <br>
    <label for="classShortening">수업 시간 단축 시간 (분):</label>
    <input type="number" id="classShortening" min="0">
    <br>
    <label for="lunchShortening">점심시간 단축 시간 (분):</label>
    <input type="number" id="lunchShortening" min="0">
    <br>
    <button onclick="generateTimetable()">시간표 생성</button>
    <br>
    <h2>생성된 시간표:</h2>
    <div id="timetable"></div>

    <script>
        function generateTimetable() {
            const classType = document.getElementById("classType").value;
            const classShortening = parseInt(document.getElementById("classShortening").value);
            const lunchShortening = parseInt(document.getElementById("lunchShortening").value);

            const numClasses = (classType === "6교시") ? 6 : 7;

            const classStartTime = "08:00";
            const lunchStartTime = "12:00";

            const classDurations = [];
            const lunchDuration = 60;

            for (let i = 0; i < numClasses; i++) {
                classDurations.push(50);
            }

            const lunchEndTime = addMinutes(lunchStartTime, lunchDuration - lunchShortening);

            const modifiedClassDurations = classDurations.map(duration => duration - classShortening);

            const timetable = document.getElementById("timetable");
            let timetableHTML = "<p>생성된 시간표:</p>";

            for (let i = 0; i < numClasses; i++) {
                const classNumber = i + 1;
                const startTime = addMinutes(classStartTime, i * 50);
                const endTime = addMinutes(startTime, modifiedClassDurations[i]);

                // 중첩 여부 확인
                const isOverlapping = endTime > lunchStartTime && startTime < lunchEndTime;

                // 중첩되지 않는 경우에만 시간표에 추가
                if (!isOverlapping) {
                    timetableHTML += `
                        <p>${classNumber}교시 - 시작 시간: ${startTime}, 종료 시간: ${endTime}</p>
                    `;
                }
            }

            timetable.innerHTML = timetableHTML;
        }

        function addMinutes(time, minutes) {
            const [hour, minute] = time.split(":").map(Number);
            const totalMinutes = hour * 60 + minute;
            const newTotalMinutes = totalMinutes + minutes;
            const newHour = Math.floor(newTotalMinutes / 60);
            const newMinute = newTotalMinutes % 60;
            return `${String(newHour).padStart(2, '0')}:${String(newMinute).padStart(2, '0')}`;
        }
    </script>
</body>
</html>
